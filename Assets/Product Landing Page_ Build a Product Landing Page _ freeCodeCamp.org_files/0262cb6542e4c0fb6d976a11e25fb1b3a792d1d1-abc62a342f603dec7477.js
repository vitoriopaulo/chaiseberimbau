"use strict";(self.webpackChunk_freecodecamp_client=self.webpackChunk_freecodecamp_client||[]).push([[9037],{20741:function(e,t,n){n.d(t,{A:function(){return Q}});n(94814);var a=n(72047),o=n(92013),r=n(60805),i=n(41903),s=n(97829);const l=e=>Intl.NumberFormat("en-US").format(e),m=e=>l(e/100);var c=n(16729),d=n(60319),p=n.n(d),u=n(12835),h=n(10283),y=n(80807),g=n(31011),E=n(11801);function b(e){let{processing:t,reset:n,success:r,redirecting:s,isSignedIn:l,error:m=null}=e;const{t:c}=(0,i.Bd)(),d=t||s?"info":r?"success":"danger",u=s?""+c("donate.redirecting"):t?""+c("donate.processing"):r?""+c("donate.thank-you"):""+c("donate.error");return a.createElement(o.Fc,{variant:d,className:"donation-completion"},a.createElement("b",null,u),a.createElement(o.hK,{size:"m"}),a.createElement("div",{className:"donation-completion-body"},(t||s)&&a.createElement(p(),{className:"user-state-spinner",color:"#0a0a23",fadeIn:"none",name:"line-scale"}),r&&a.createElement(a.Fragment,null,a.createElement("p",null,c("donate.free-tech")),l&&a.createElement(a.Fragment,null,a.createElement("p",null,c("donate.visit-supporters")),a.createElement(E.N_,{className:"btn complete-button",key:"supporters",sameTab:!1,to:"/supporters"},c("buttons.go-to-supporters")))),m&&a.createElement("p",null,m)),a.createElement("div",{className:"donation-completion-buttons"},m&&a.createElement("button",{type:"button",className:"try-again-button",onClick:n},c("buttons.try-again"))))}b.displayName="DonateCompletion";var S=b,f=n(7572);const v=e=>a.createElement("svg",Object.assign({id:"patreon-logo",viewBox:"10 0 2560 356",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",role:"img","aria-labelledby":"patreon-logo-label"},e),a.createElement("title",{id:"patreon-logo-label"},"Patreon"),a.createElement("g",null,a.createElement("path",{d:"M1536.54 72.449v76.933h128.24v61.473h-128.24v74.51h128.24v62.921h-206.64V9.529h206.64v62.92h-128.24M2070.82 178.907c0-55.652-37.76-107.434-99.21-107.434-61.95 0-99.21 51.782-99.21 107.434s37.26 107.435 99.21 107.435c61.45 0 99.21-51.783 99.21-107.435zm-278.77 0c0-92.916 66.79-178.093 179.56-178.093 112.26 0 179.05 85.177 179.05 178.093 0 92.916-66.79 178.093-179.05 178.093-112.77 0-179.56-85.177-179.56-178.093zM186.32 131.97c0-31.46-21.299-58.563-54.206-58.563H78.398v117.109h53.716c32.907 0 54.206-27.086 54.206-58.546zM0 9.529h141.788c75.016 0 123.417 56.628 123.417 122.441s-48.401 122.423-123.417 122.423h-63.39v93.893H0V9.529zM492.17 106.314l-41.621 139.382h82.266L492.17 106.314zm73.081 241.972-13.054-41.134H431.69l-13.072 41.134h-83.73L455.882 9.529h72.105l122.442 338.757h-85.178zM782.055 77.277H705.61V9.529h231.793v67.748h-76.951v271.009h-78.397V77.277M2485.08 230.202V9.529h77.91v338.757h-81.78l-121.97-217.78v217.78h-78.4V9.529h81.78l122.46 220.673M1245.68 131.97c0-31.46-21.3-58.563-54.21-58.563h-53.72v117.109h53.72c32.91 0 54.21-27.086 54.21-58.546zM1059.36 9.529h142.29c75 0 123.4 56.628 123.4 122.441 0 47.425-25.17 89.517-67.28 109.369l67.77 106.947h-90.98l-60.03-93.893h-36.78v93.893h-78.39V9.529z"})));v.displayName="PatreonLogo";var P=v;const{patreonClientId:C}=f;var D=e=>{let{postPayment:t,donationAmount:n}=e;if(!C||!n||!s.hY.successUrl)return null;const o="https://www.patreon.com/oauth2/become-patron?response_type=code"+("$&min_cents="+n)+("&client_id="+C)+("&redirect_uri="+s.hY.successUrl)+"&scope=identity%20identity[email]";return a.createElement("a",{className:"patreon-button link-button","data-patreon-widget-type":"become-patron-button",href:o,onClick:()=>t({paymentProvider:s.CA.Patreon}),rel:"noreferrer",target:"_blank"},a.createElement(P,null))},N=n(58617),F=n(94685),w=n(25821);class A extends a.Component{constructor(){super(...arguments),this.state={isSdkLoaded:!!window.paypal,isSubscription:!0},this.onScriptLoad=()=>{this.setState({isSdkLoaded:!0}),this.props.onLoad()}}static getDerivedStateFromProps(e,t){const{isSubscription:n}=e;return n!==t.isSubscription?{isSubscription:n}:null}componentDidMount(){this.loadScript(this.props.isSubscription,!0)}componentWillUnmount(){(0,w.i)("paypal-sdk")}componentDidUpdate(e){e.isSubscription===this.state.isSubscription&&e.style.color===this.props.style.color&&e.style.tagline===this.props.style.tagline&&e.style.height===this.props.style.height&&e.isMinimalForm===this.props.isMinimalForm||(this.setState({isSdkLoaded:!1}),this.loadScript(this.state.isSubscription,!0))}loadScript(e,t){t&&(0,w.i)("paypal-sdk");const n=this.props.isMinimalForm?"card,":"";let a="?client-id="+this.props.clientId+"&disable-funding="+n+"credit,bancontact,blik,eps,giropay,ideal,mybank,p24,sepa,sofort,venmo";e&&(a+="&vault=true&intent=subscription"),(0,w.Z)("paypal-sdk",!0,"https://www.paypal.com/sdk/js"+a,this.onScriptLoad,"paypal")}captureOneTimePayment(e,t){return t.order.capture().then((t=>this.props.onApprove(t,e)))}render(){const{isSdkLoaded:e,isSubscription:t}=this.state,{onApprove:n,onError:o,onCancel:r,createSubscription:i,createOrder:s,style:l}=this.props;if(!e)return a.createElement(a.Fragment,null);const m=window.paypal.Buttons.driver("react",{React:a,ReactDOM:F});return a.createElement(m,{createOrder:t?null:s,createSubscription:t?i:null,onApprove:t?(e,t)=>n(e,t):(e,t)=>this.captureOneTimePayment(e,t),onCancel:r,onError:o,style:l})}}A.displayName="PayPalButtonScriptLoader";const{paypalClientId:M,deploymentEnv:k}=f;class I extends a.Component{constructor(e){super(e),this.state={amount:s.cl.donationAmount,duration:s.cl.donationDuration,planId:null}}static getDerivedStateFromProps(e){const{donationAmount:t,donationDuration:n}=e;return{...(0,s.VD)(t,n,s.hQ[k||"staging"])}}render(){const{duration:e,planId:t,amount:n}=this.state,{t:o,theme:r,isPaypalLoading:i,isMinimalForm:l}=this.props,m="one-time"!==e,c=r===N.B.Night?"white":"gold";return M?a.createElement("div",{className:"paypal-buttons-container"},a.createElement(A,{clientId:M,createOrder:(e,t)=>t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(n/100).toString()}}]}),createSubscription:(e,n)=>n.subscription.create({plan_id:t}),isMinimalForm:l,isPaypalLoading:i,isSubscription:m,onApprove:e=>{this.props.postPayment({paymentProvider:s.CA.Paypal,data:e})},onCancel:()=>{this.props.onDonationStateChange({redirecting:!1,processing:!1,success:!1,error:o("donate.failed-pay")})},onError:()=>{this.props.handlePaymentButtonLoad("paypal"),this.props.onDonationStateChange({redirecting:!1,processing:!1,success:!1,error:o("donate.try-again")})},onLoad:()=>this.props.handlePaymentButtonLoad("paypal"),planId:t,style:{tagline:!1,height:43,color:c}})):null}}I.displayName="PaypalButton";const L=(0,u.Mz)(g.dt,g.Ci,((e,t)=>{let{isDonating:n}=e;return{isDonating:n,showLoading:t}}));I.displayName="PaypalButton";var B=(0,c.Ng)(L)((0,i.CI)()(I)),x=n(20592);function z(e){let{theme:t,t:n,onDonationStateChange:o,postPayment:r,processing:i}=e;const[l,m]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)([{elementType:"cardNumber",complete:!1,error:null},{elementType:"cardExpiry",complete:!1,error:null}]),h=p.every((e=>{let{complete:t,error:n}=e;return t&&!n})),y=c||i,g=(0,x.useStripe)(),E=(0,x.useElements)();function b(e){const{elementType:t,error:n,complete:a}=e;u(p.map((e=>e.elementType===t?{elementType:t,error:n,complete:a}:e)))}const S={style:{base:{fontSize:"18px",fontFamily:"Lato, sans-serif",color:t===N.B.Night?"#fff":"#0a0a23","::placeholder":{color:"#858591"}}}},f=async(e,t)=>g?g.confirmCardPayment(e,{payment_method:t}):{error:{type:"StripeNotLoaded"}};return a.createElement("form",{className:"donation-form",onSubmit:e=>{(async e=>{if(e.preventDefault(),!h)return m(!1);if(m(!0),!y&&g&&E){const e=E.getElement(x.CardNumberElement);if(e){d(!0);const{paymentMethod:t,error:a}=await g.createPaymentMethod({type:"card",card:e});a?o({redirecting:!1,processing:!1,success:!1,error:n("donate.went-wrong")}):t&&r({paymentProvider:s.CA.StripeCard,paymentMethodId:t.id,handleAuthentication:f})}}d(!1)})(e)}},a.createElement("div",{className:"donation-elements"+(l?"":" failed-submission")},a.createElement(x.CardNumberElement,{className:"form-control donate-input-element",onChange:b,options:S}),a.createElement(x.CardExpiryElement,{className:"form-control donate-input-element",onChange:b,options:S})),a.createElement("div",{className:"form-status"},!l&&a.createElement("p",null,n("donate.valid-card"))),a.createElement("button",{className:"confirm-donation-btn",disabled:!g||!E||y,type:"submit"},n("buttons.donate")))}var _=n(65553);const T=e=>{let{stripe:t,label:n,amount:o,theme:r,duration:l,postPayment:m,onDonationStateChange:c,handlePaymentButtonLoad:d}=e;const[p,u]=(0,a.useState)(null),{t:h}=(0,i.Bd)(),y=(0,a.useCallback)((e=>{c({redirecting:!1,processing:!1,success:!1,error:e})}),[c]);return(0,a.useEffect)((()=>{if(!t)return;const e=t.paymentRequest({country:"US",currency:"usd",total:{label:n,amount:o},requestPayerName:!0,requestPayerEmail:!0,disableWallets:["browserCard"]});return e.on("paymentmethod",(async e=>{const{payerEmail:n,payerName:a,paymentMethod:{id:r}}=e,{data:{clientSecret:i,subscriptionId:c,error:d}}=await(0,_.eQ)({email:n,name:a,amount:o,duration:l});if(d)e.complete("fail"),y(h("donate.try-another-method"));else if(i){const{paymentIntent:o,error:l}=await t.confirmCardPayment(i,{payment_method:e.paymentMethod.id},{handleActions:!1});if(l)e.complete("fail"),y(h("donate.try-another-method"));else{if(e.complete("success"),"requires_action"===o.status){const{error:e}=await t.confirmCardPayment(i);if(e)return y(h("donate.try-another-method"))}m({paymentProvider:s.CA.Stripe,paymentMethodId:r,payerEmail:n,payerName:a,subscriptionId:c})}}})),e.canMakePayment().then((t=>{t&&u(e)})),()=>{u(null)}}),[n,o,t,m,d,l,y,h]),a.createElement("form",{className:"wallets-form"},p&&a.createElement(x.PaymentRequestButtonElement,{onReady:()=>d("stripe"),options:{style:{paymentRequestButton:{type:"default",theme:r===N.B.Night?"light":"dark",height:"43px"}},paymentRequest:p}}))};function V(e){return a.createElement(x.ElementsConsumer,null,(t=>{let{stripe:n}=t;return a.createElement(T,Object.assign({stripe:n},e))}))}var O=n(44398),U=n(79744);var R=()=>a.createElement(a.Fragment,null,a.createElement(U.g,{icon:O.DW4}),"  ");const q=(0,u.Mz)(g.Ci,g.$k,g.ig,g.Rv,g.dt,g.hm,((e,t,n,a,o,r)=>{let{email:i,theme:s}=o;return{isSignedIn:t,isDonating:n,showLoading:e,donationFormState:a,email:i,theme:s,completedChallenges:r}})),K={postCharge:y._T,updateDonationFormState:y.$z},j=()=>a.createElement("div",{className:" donation-completion donation-completion-loading"},a.createElement(p(),{className:"script-loading-spinner",fadeIn:"none",name:"line-scale"}));class H extends a.Component{constructor(e){super(e),this.postPayment=e=>{let{paymentProvider:t,data:n,payerEmail:a,payerName:o,paymentMethodId:r,handleAuthentication:i,subscriptionId:s}=e;const{donationAmount:l,donationDuration:m}=this.state,{paymentContext:c,email:d,selectedDonationAmount:p}=this.props,u=p||l;this.props.postCharge({paymentProvider:t,paymentContext:c,amount:u,duration:m,data:n,email:d||a,name:o,paymentMethodId:r,handleAuthentication:i,subscriptionId:s}),this.props.handleProcessing&&this.props.handleProcessing()};const t=s.cl;this.state={...t},this.onDonationStateChange=this.onDonationStateChange.bind(this),this.resetDonation=this.resetDonation.bind(this),this.postPayment=this.postPayment.bind(this),this.handlePaymentButtonLoad=this.handlePaymentButtonLoad.bind(this)}componentWillUnmount(){this.resetDonation()}onDonationStateChange(e){window.scrollTo(0,0),this.props.updateDonationFormState({...this.props.donationFormState,...e})}handlePaymentButtonLoad(e){this.props.updateDonationFormState({...this.props.donationFormState,loading:{...this.props.donationFormState.loading,[e]:!1}})}resetDonation(){return this.props.updateDonationFormState({...h.fe})}renderButtonGroup(){const{donationAmount:e,donationDuration:t}=this.state,{donationFormState:{loading:n,processing:r},defaultTheme:i,theme:s,t:l,isMinimalForm:c,isSignedIn:d,isDonating:p,editAmount:u,selectedDonationAmount:h,completedChallenges:y}=this.props,g=h||e,E=i||s,b=l("donate.wallet-label-1",{usd:g/100})+":",S=y.length>=3,f=d&&(c||!p)&&S,v=a.createElement(a.Fragment,null,a.createElement("b",null,l("donate.confirm-multitier",{usd:m(g)})),a.createElement("button",{type:"button",className:"edit-amount-button",onClick:u},l("donate.edit-amount")));return a.createElement(a.Fragment,null,a.createElement("div",{className:u?"edit-amount-confirmation":c?"donation-label-modal":""},v),a.createElement(o.hK,{size:u?"xs":"m"}),a.createElement("fieldset",{"data-playwright-test-label":"donation-form",className:"donate-btn-group security-legend"},a.createElement("legend",null,a.createElement(R,null),l("donate.secure-donation")),n.stripe&&n.paypal&&a.createElement(j,null),a.createElement(V,{amount:g,duration:t,handlePaymentButtonLoad:this.handlePaymentButtonLoad,label:b,onDonationStateChange:this.onDonationStateChange,postPayment:this.postPayment,theme:E}),a.createElement(B,{donationAmount:g,donationDuration:t,handlePaymentButtonLoad:this.handlePaymentButtonLoad,postPayment:this.postPayment,isMinimalForm:f,isPaypalLoading:n.paypal,onDonationStateChange:this.onDonationStateChange,theme:E}),(!n.stripe||!n.paypal)&&a.createElement(D,{postPayment:this.postPayment,donationAmount:g}),f&&a.createElement(a.Fragment,null,a.createElement("div",{className:"separator"},l("donate.or-card")),a.createElement(z,{onDonationStateChange:this.onDonationStateChange,postPayment:this.postPayment,processing:r,t:l,theme:E}))))}renderPageForm(){return a.createElement(a.Fragment,null,a.createElement("div",null,this.renderButtonGroup()))}render(){const{donationFormState:{processing:e,success:t,error:n,redirecting:o},isMinimalForm:r,isSignedIn:i}=this.props;return t||n?a.createElement(S,{processing:e,redirecting:o,success:t,error:n,isSignedIn:i,reset:this.resetDonation}):a.createElement(a.Fragment,null,(e||o)&&a.createElement(S,{processing:e,redirecting:o,success:t,error:n,isSignedIn:i,reset:this.resetDonation}),a.createElement("div",{className:e||o?"hide":""},r?this.renderButtonGroup():this.renderPageForm()))}}H.displayName="DonateForm",H.displayName="DonateForm";var W=(0,c.Ng)(q,K)((0,i.CI)()(H));function $(e){let{donationAmount:t,setDonationAmount:n,setShowDonateForm:c,isAnimationEnabled:d}=e;const{t:p}=(0,i.Bd)();return(0,r.iT)("aa-test-in-component"),a.createElement(o.fI,{className:"donate-btn-group donation-tier-selection","data-playwright-test-label":"donation-tier-selector"},a.createElement(o.fv,{xs:12},a.createElement("b",null,p("donate.confirm-monthly",{usd:m(t)})),a.createElement(o.hK,{size:"xs"}),a.createElement(o.tU,{className:"donate-btn-group",defaultValue:t.toString(),onValueChange:e=>{n(Number(e))}},a.createElement(o.j7,{className:"nav-lists"},s.zx.map((e=>a.createElement(o.Xi,{key:e,value:e.toString(),onClick:()=>n(e)},"$",m(e))))),a.createElement(o.hK,{size:"xs"}),s.zx.map((e=>{const n=m(t),r=l(t/100*50);const i=p("donate.your-donation-2",{usd:n,hours:r});return a.createElement(o.av,{key:e,className:"tab-content",value:e.toString()},a.createElement("p",null,i))}))),a.createElement("button",{className:"text-center confirm-donation-btn donate-btn-group",type:"submit",onClick:()=>c(!0)},p(d?"buttons.confirm-amount":"buttons.donate")),a.createElement(o.hK,{size:"m"})))}function G(e){let{handleProcessing:t,isMinimalForm:n,setShowDonateForm:r,donationAmount:i,paymentContext:s}=e;return a.createElement(o.fI,null,a.createElement(o.fv,{xs:12},a.createElement(W,{handleProcessing:t,isMinimalForm:n,paymentContext:s,editAmount:()=>r(!1),selectedDonationAmount:i}),a.createElement(o.hK,{size:"m"})))}var Q=e=>{let{handleProcessing:t,setShowHeaderAndFooter:n,isMinimalForm:o,paymentContext:r,isAnimationEnabled:i}=e;const[l,m]=(0,a.useState)(s.Ob),[c,d]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n&&n(!c)}),[c,n]),a.createElement(a.Fragment,null,a.createElement("div",c&&{className:"hide"},a.createElement($,{donationAmount:l,setDonationAmount:m,setShowDonateForm:d,isAnimationEnabled:i})),a.createElement("div",!c&&{className:"hide"},a.createElement(G,{donationAmount:l,handleProcessing:t,setShowDonateForm:d,isMinimalForm:o,paymentContext:r})))}},25821:function(e,t,n){function a(e,t,n,a,o){const r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=t,r.onload=a,r.src=n,r.text=o,document.getElementsByTagName("head")[0].appendChild(r)}function o(e){const t=document.getElementById(e);t&&t.remove()}n.d(t,{Z:function(){return a},i:function(){return o}})}}]);
//# sourceMappingURL=0262cb6542e4c0fb6d976a11e25fb1b3a792d1d1-abc62a342f603dec7477.js.map